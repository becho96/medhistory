# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é MedHistory

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è MedHistory –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ä–µ–¥](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å—Ä–µ–¥)
3. [–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
4. [Git Workflow](#git-workflow)
5. [–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#–ø—Ä–æ—Ü–µ—Å—Å-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
6. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Staging](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–Ω–∞-staging)
7. [–î–µ–ø–ª–æ–π –Ω–∞ Production](#–¥–µ–ø–ª–æ–π-–Ω–∞-production)
8. [–û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–æ—Ç–∫–∞—Ç-–∏–∑–º–µ–Ω–µ–Ω–∏–π)
9. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è Product Manager

–í–∞–º –Ω—É–∂–Ω—ã –≤—Å–µ–≥–æ **–¥–≤–∞ —Å–∫—Ä–∏–ø—Ç–∞**:

```bash
# 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–æ/staging
./deploy staging

# 2. –î–µ–ø–ª–æ–π –Ω–∞ Production
./deploy production
```

–í–æ—Ç –∏ –≤—Å—ë! üéâ

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ä–µ–¥

### üîß Local (–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ  
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –í–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä (Docker)  
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `.env.local`  
**–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:** `./deploy local`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Hot reload –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ü—Ä–æ—Å—Ç—ã–µ –ø–∞—Ä–æ–ª–∏ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
- Frontend: http://localhost:5173
- Backend API: http://localhost:8000
- API Docs: http://localhost:8000/docs
- MinIO Console: http://localhost:9001
- Grafana: http://localhost:3000 (—Å --monitoring)

---

### üß™ Staging (–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ production  
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –õ–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä  
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `.env.staging`  
**–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:** `./deploy staging`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Production-like –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
- Production Docker –æ–±—Ä–∞–∑—ã
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã (–Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å local)

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
- Frontend: http://localhost:8080
- Backend API: http://localhost:8001
- API Docs: http://localhost:8001/docs
- MinIO Console: http://localhost:9011

---

### üöÄ Production (–ë–æ–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏  
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–æ (158.160.99.232)  
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `.env.production`  
**–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:** `./deploy production`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- SSL/TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
- Frontend: http://158.160.99.232
- API Docs: http://158.160.99.232/docs
- Grafana: http://158.160.99.232:3000

---

## üõ† –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ä–µ–¥—ã:

```bash
# 1. Local –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
cp environments/local.env .env.local

# 2. Staging –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
cp environments/staging.env .env.staging

# 3. Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–í–ê–ñ–ù–û!)
cp environments/production.env .env.production
```

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

**OpenRouter API Key** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://openrouter.ai/
2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á: https://openrouter.ai/keys
3. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ `.env.local`, `.env.staging`, `.env.production`

```bash
OPENROUTER_API_KEY=sk-or-v1-–≤–∞—à-–∫–ª—é—á-–∑–¥–µ—Å—å
```

### –®–∞–≥ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û –¥–ª—è staging –∏ production!**

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π (macOS/Linux)
openssl rand -base64 32  # PostgreSQL
openssl rand -base64 32  # MongoDB
openssl rand -base64 32  # MinIO
openssl rand -base64 48  # JWT Secret (64 —Å–∏–º–≤–æ–ª–∞)
```

–ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ `change_me_*` –∑–Ω–∞—á–µ–Ω–∏—è –≤ `.env.staging` –∏ `.env.production`

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ local
./scripts/utils/validate-config.sh local

# –ü—Ä–æ–≤–µ—Ä–∫–∞ staging
./scripts/utils/validate-config.sh staging

# –ü—Ä–æ–≤–µ—Ä–∫–∞ production
./scripts/utils/validate-config.sh production
```

### –®–∞–≥ 5: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã
./deploy local

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
open http://localhost:5173
```

---

## üå≥ Git Workflow

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ç–æ–∫

```
main (production)
  ‚Üë
  ‚îî‚îÄ‚îÄ develop (staging)
        ‚Üë
        ‚îî‚îÄ‚îÄ feature/–Ω–∞–∑–≤–∞–Ω–∏–µ-—Ñ–∏—á–∏
        ‚îî‚îÄ‚îÄ bugfix/–Ω–∞–∑–≤–∞–Ω–∏–µ-–±–∞–≥—Ñ–∏–∫—Å–∞
```

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –≤–µ—Ç–∫–∞–º–∏

#### üìå `main` - Production –≤–µ—Ç–∫–∞

- **–ó–∞–ø—Ä–µ—â–µ–Ω–æ** –ø—É—à–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é
- –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Pull Request –∏–∑ `develop`
- –í—Å–µ–≥–¥–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
- –ö–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç = —Ä–µ–ª–∏–∑ –Ω–∞ production

#### üìå `develop` - Staging –≤–µ—Ç–∫–∞

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –≤–µ—Ç–∫–∞
- Merge –≤—Å–µ—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ñ–∏—á
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ production
- –ö–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç = –¥–µ–ø–ª–æ–π –Ω–∞ staging

#### üìå `feature/*` - –í–µ—Ç–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- –°–æ–∑–¥–∞—é—Ç—Å—è –∏–∑ `develop`
- –û–¥–Ω–∞ –≤–µ—Ç–∫–∞ = –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è ‚Üí PR –≤ `develop`

---

## üíª –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

#### 1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º develop
git checkout develop
git pull origin develop

# –°–æ–∑–¥–∞–µ–º feature –≤–µ—Ç–∫—É
git checkout -b feature/add-user-profile

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É
git branch
```

#### 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
./deploy local

# –†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –∫–æ–¥...
# –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ http://localhost:5173
```

#### 3. –ö–æ–º–º–∏—Ç—ã

```bash
# –î–æ–±–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .

# –ö–æ–º–º–∏—Ç–∏–º —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"

# –ü—É—à–∏–º –≤ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git push origin feature/add-user-profile
```

#### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º local
docker compose -f docker-compose.base.yml -f docker-compose.local.yml down

# –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞ staging
./deploy staging

# –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ http://localhost:8080
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

#### 5. Pull Request –≤ develop

```bash
# –ù–∞ GitHub/GitLab —Å–æ–∑–¥–∞–µ–º PR:
# feature/add-user-profile ‚Üí develop

# –ü–æ—Å–ª–µ –∫–æ–¥-—Ä–µ–≤—å—é –∏ –æ–¥–æ–±—Ä–µ–Ω–∏—è
git checkout develop
git merge feature/add-user-profile
git push origin develop
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Staging

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Staging?

- ‚úÖ –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º production –¥–µ–ø–ª–æ–µ–º
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∏—á
- ‚úÖ QA —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–∫–∞–∑—á–∏–∫—É

### –ü—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### 1. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Staging

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –Ω–∞ –≤–µ—Ç–∫–µ develop
git checkout develop
git pull origin develop

# –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –Ω–∞ staging
./deploy staging

# –° –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
./deploy staging --monitoring
```

#### 2. –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] AI –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] API endpoints –æ—Ç–≤–µ—á–∞—é—Ç
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose -f docker-compose.base.yml -f docker-compose.staging.yml logs -f

# –¢–æ–ª—å–∫–æ backend
docker compose -f docker-compose.base.yml -f docker-compose.staging.yml logs -f backend

# –¢–æ–ª—å–∫–æ frontend
docker compose -f docker-compose.base.yml -f docker-compose.staging.yml logs -f frontend
```

#### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ Grafana
open http://localhost:3001

# –õ–æ–≥–∏–Ω: admin / admin
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏:
# - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
# - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
# - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
# - –û—à–∏–±–∫–∏
```

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Production

### ‚ö†Ô∏è –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –Ω–∞ staging –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
- [ ] `.env.production` –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏
- [ ] –ï—Å—Ç—å –±—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–µ—Å–ª–∏ downtime)
- [ ] –ö–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ develop
git checkout develop

# –°–æ–∑–¥–∞–µ–º Pull Request: develop ‚Üí main
# –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è, merge –≤ main

# –û–±–Ω–æ–≤–ª—è–µ–º main –ª–æ–∫–∞–ª—å–Ω–æ
git checkout main
git pull origin main

# –°–æ–∑–¥–∞–µ–º —Ç–µ–≥ –≤–µ—Ä—Å–∏–∏
git tag -a v1.2.0 -m "Release v1.2.0: –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
git push origin v1.2.0
```

#### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
./scripts/utils/validate-config.sh production

# –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ - –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∏—Ö!
```

#### 3. –î–µ–ø–ª–æ–π

```bash
# –ó–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è –Ω–∞ production
./deploy production

# –° –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
./deploy production --monitoring

# –ë–µ–∑ –±—ç–∫–∞–ø–∞ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!)
./deploy production --no-backup
```

#### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–µ–ø–ª–æ—è

–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫—É SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
3. ‚úÖ –ó–∞–≥—Ä—É–∑–∫—É –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
4. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫—É —Å—Ç–∞—Ä—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
5. ‚úÖ –°–±–æ—Ä–∫—É –Ω–æ–≤—ã—Ö –æ–±—Ä–∞–∑–æ–≤
6. ‚úÖ –ó–∞–ø—É—Å–∫ –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∞—Ç—É—Å–∞

#### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
open http://158.160.99.232

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API
curl http://158.160.99.232/health

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
open http://158.160.99.232/docs
```

#### 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (–ø–µ—Ä–≤—ã–µ 5 –º–∏–Ω—É—Ç)
ssh yc-user@158.160.99.232 'cd ~/medhistory && docker compose -f docker-compose.base.yml -f docker-compose.prod.yml logs -f'

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ Grafana
open http://158.160.99.232:3000
```

---

## ‚èÆ –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞—Ä—Ö–∏–≤ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏
ssh yc-user@158.160.99.232

# –ù–∞–π–¥–∏—Ç–µ –±—ç–∫–∞–ø
ls -la ~/ | grep medhistory_old

# –û—Ç–∫–∞—Ç –Ω–∞ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
cd ~
mv medhistory medhistory_broken
mv medhistory_old_YYYYMMDD_HHMMSS medhistory

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
cd ~/medhistory
docker compose -f docker-compose.base.yml -f docker-compose.prod.yml up -d
```

### –û—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ Git

```bash
# –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–∞–±–æ—á—É—é –≤–µ—Ä—Å–∏—é
git log --oneline

# –û—Ç–∫–∞—Ç–∏—Ç–µ—Å—å –Ω–∞ –Ω—É–∂–Ω—ã–π –∫–æ–º–º–∏—Ç
git checkout <commit-hash>

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–≥
git checkout v1.1.0

# –î–µ–ø–ª–æ–π —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏
./deploy production
```

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ production —Å–µ—Ä–≤–µ—Ä—É

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –∫–ª—é—á–∞
ssh -v yc-user@158.160.99.232

# –ü—Ä–æ–≤–µ—Ä–∫–∞ IP –∞–¥—Ä–µ—Å–∞
cat .env.production | grep PROD_SERVER_IP

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–µ—Ä–≤–æ–ª–∞
ping 158.160.99.232
```

### –ü—Ä–æ–±–ª–µ–º–∞: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker compose logs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
docker system df

# –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
docker system prune -a

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker Desktop
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cat .env.staging

# –°—Ä–∞–≤–Ω–∏—Ç–µ —Å —à–∞–±–ª–æ–Ω–æ–º
diff .env.staging environments/staging.env

# –†–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏
openssl rand -base64 32
```

### –ü—Ä–æ–±–ª–µ–º–∞: Frontend –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Backend

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ VITE_API_URL –≤ .env —Ñ–∞–π–ª–µ
cat .env.local | grep VITE_API_URL

# –î–ª—è local –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
VITE_API_URL=http://localhost:8000

# –î–ª—è staging:
VITE_API_URL=http://localhost:8001

# –î–ª—è production:
VITE_API_URL=http://158.160.99.232

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ frontend
./deploy <env> --rebuild
```

---

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps -a

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose -f docker-compose.base.yml -f docker-compose.local.yml down

# –£–¥–∞–ª–µ–Ω–∏–µ —Å —Ç–æ–º–∞–º–∏ (—É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ!)
docker compose -f docker-compose.base.yml -f docker-compose.local.yml down -v

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker compose -f docker-compose.base.yml -f docker-compose.local.yml restart backend
```

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```bash
# –í—Å–µ –ª–æ–≥–∏
docker compose logs -f

# –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker compose logs --tail=100

# –¢–æ–ª—å–∫–æ backend
docker compose logs -f backend

# –õ–æ–≥–∏ –Ω–∞ production
ssh yc-user@158.160.99.232 'cd ~/medhistory && docker compose -f docker-compose.base.yml -f docker-compose.prod.yml logs -f backend'
```

### –ë—ç–∫–∞–ø—ã

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
./scripts/utils/backup.sh

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
./scripts/utils/restore.sh <backup-file>

# –ü—Ä–æ—Å–º–æ—Ç—Ä –±—ç–∫–∞–ø–æ–≤
ls -lh ~/backups/
```

### Git –∫–æ–º–∞–Ω–¥—ã

```bash
# –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
git status

# –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤
git log --oneline --graph

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏
git checkout -b feature/–Ω–∞–∑–≤–∞–Ω–∏–µ

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ç–æ–∫
git fetch --all
git pull origin develop

# –£–¥–∞–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ç–∫–∏
git branch -d feature/–Ω–∞–∑–≤–∞–Ω–∏–µ

# –£–¥–∞–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω–æ–π –≤–µ—Ç–∫–∏
git push origin --delete feature/–Ω–∞–∑–≤–∞–Ω–∏–µ
```

---

## üéì Best Practices

### ‚úÖ DO (–î–µ–ª–∞–π—Ç–µ —Ç–∞–∫)

- ‚úÖ –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ staging –ø–µ—Ä–µ–¥ production
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è staging –∏ production
- ‚úÖ –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ commit message
- ‚úÖ –î–µ–ª–∞–π—Ç–µ –º–∞–ª–µ–Ω—å–∫–∏–µ, –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- ‚úÖ –°–ª–µ–¥–∏—Ç–µ –∑–∞ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –≤ Grafana
- ‚úÖ –î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –ø–µ—Ä–µ–¥ production –¥–µ–ø–ª–æ–µ–º
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–≥–∏ –¥–ª—è —Ä–µ–ª–∏–∑–æ–≤

### ‚ùå DON'T (–ù–µ –¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫)

- ‚ùå –ù–µ –ø—É—à—å—Ç–µ –Ω–∞–ø—Ä—è–º—É—é –≤ main
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –Ω–∞ production
- ‚ùå –ù–µ –¥–µ–ø–ª–æ–π—Ç–µ –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚ùå –ù–µ –¥–µ–ø–ª–æ–π—Ç–µ –≤ –ø—è—Ç–Ω–∏—Ü—É –≤–µ—á–µ—Ä–æ–º üòÖ
- ‚ùå –ù–µ —É–¥–∞–ª—è–π—Ç–µ –±—ç–∫–∞–ø—ã –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚ùå –ù–µ –∫–æ–º–∏—Ç—å—Ç–µ .env —Ñ–∞–π–ª—ã

---

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [API Documentation](./API_DOCUMENTATION.md)
- [Change Log](./change_log/)
- [Monitoring Guide](./MONITORING_DEPLOYMENT_PLAN.md)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./scripts/utils/status.sh

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ production
./scripts/prod/diagnose.sh
```

### –°–≤—è–∑—å

- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- **–°—Ä–æ—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:** –°–≤—è–∂–∏—Ç–µ—Å—å —Å DevOps –∫–æ–º–∞–Ω–¥–æ–π

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è MedHistory.

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:**

```bash
./deploy local       # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
./deploy staging     # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
./deploy production  # Production –¥–µ–ø–ª–æ–π
```

–£–¥–∞—á–∏! üöÄ

