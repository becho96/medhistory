# üìä –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 29 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Ä–µ—à–µ–Ω–∏—è](#–æ–±–∑–æ—Ä-—Ä–µ—à–µ–Ω–∏—è)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å–∏—Å—Ç–µ–º—ã)
4. [–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏](#–æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ-–º–µ—Ç—Ä–∏–∫–∏)
5. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
6. [–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏](#—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ-—Ñ—É–Ω–∫—Ü–∏–∏)
7. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
8. [–î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ](#–¥–æ—Å—Ç—É–ø-–∫-—Å–∏—Å—Ç–µ–º–µ)
9. [–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏](#—Å–ª–µ–¥—É—é—â–∏–µ-—à–∞–≥–∏)

---

## üéØ –û–±–∑–æ—Ä —Ä–µ—à–µ–Ω–∏—è

### –í—ã–±—Ä–∞–Ω–Ω—ã–π —Å—Ç–µ–∫: **Prometheus + Grafana**

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞:**
- ‚úÖ –ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –õ–µ–≥–∫–∏–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Docker
- ‚úÖ –ë–æ–≥–∞—Ç–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ exporters
- ‚úÖ –ú–æ—â–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏ open-source
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (—Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω—ã, –Ω–æ –Ω–µ –≤—ã–±—Ä–∞–Ω—ã)
- **ELK Stack** - –∏–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á
- **Zabbix** - —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ
- **Datadog** - –ø–ª–∞—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- **New Relic** - –ø–ª–∞—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        NGINX (Reverse Proxy)                    ‚îÇ
‚îÇ                    https://your-domain.com                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ               ‚îÇ               ‚îÇ
           ‚ñº               ‚ñº               ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Frontend  ‚îÇ   ‚îÇ  Backend  ‚îÇ   ‚îÇ  Grafana  ‚îÇ
    ‚îÇ   (UI)    ‚îÇ   ‚îÇ   (API)   ‚îÇ   ‚îÇ  (:3000)  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ               ‚îÇ
                          ‚îÇ               ‚ñº
                          ‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                          ‚îÇ         ‚îÇPrometheus ‚îÇ
                          ‚îÇ         ‚îÇ  (:9090)  ‚îÇ
                          ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ               ‚îÇ
                          ‚ñº               ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ                                                ‚îÇ
         ‚ñº                                                ‚ñº
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ   Custom    ‚îÇ                                ‚îÇ  Standard   ‚îÇ
  ‚îÇ  Exporter   ‚îÇ                                ‚îÇ  Exporters  ‚îÇ
  ‚îÇ             ‚îÇ                                ‚îÇ             ‚îÇ
  ‚îÇ  - Business ‚îÇ                                ‚îÇ - Postgres  ‚îÇ
  ‚îÇ    Metrics  ‚îÇ                                ‚îÇ - MongoDB   ‚îÇ
  ‚îÇ  - From DB  ‚îÇ                                ‚îÇ - Node      ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                                              ‚îÇ
         ‚ñº                                              ‚ñº
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ              Data Sources (PostgreSQL, MongoDB, MinIO)   ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫:**
   - Backend API —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ Prometheus instrumentator
   - Custom Exporter –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ –∏–∑ Backend API
   - Standard Exporters —Å–æ–±–∏—Ä–∞—é—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ –ë–î –∏ —Å–∏—Å—Ç–µ–º—ã

2. **–•—Ä–∞–Ω–µ–Ω–∏–µ:**
   - Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∫–∞–∂–¥—ã–µ 15-30 —Å–µ–∫—É–Ω–¥
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫: 15 –¥–Ω–µ–π
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10 GB

3. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:**
   - Grafana —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Prometheus
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. Prometheus (–ø–æ—Ä—Ç 9090)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–±–æ—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `monitoring/prometheus/prometheus.yml`
- **Retention:** 15 –¥–Ω–µ–π, 10 GB
- **Scrape interval:** 15-30 —Å–µ–∫—É–Ω–¥
- **–î–æ—Å—Ç—É–ø:** –õ–æ–∫–∞–ª—å–Ω–æ –≤ dev, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≤ prod

### 2. Grafana (–ø–æ—Ä—Ç 3000)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `monitoring/grafana/grafana.ini`
- **–î–∞—à–±–æ—Ä–¥—ã:** 3 –ø—Ä–µ–¥–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö
- **–î–æ—Å—Ç—É–ø:** 
  - Dev: http://localhost:3000
  - Prod: https://your-domain.com/grafana

### 3. Custom Exporter (–ø–æ—Ä—Ç 9100)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –≠–∫—Å–ø–æ—Ä—Ç –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫
- **–Ø–∑—ã–∫:** Python 3.11
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:** Backend API
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 30 —Å–µ–∫—É–Ω–¥

### 4. PostgreSQL Exporter (–ø–æ—Ä—Ç 9187)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–µ—Ç—Ä–∏–∫–∏ PostgreSQL
- **–ú–µ—Ç—Ä–∏–∫–∏:** –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Ä–∞–∑–º–µ—Ä –ë–î

### 5. MongoDB Exporter (–ø–æ—Ä—Ç 9216)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–µ—Ç—Ä–∏–∫–∏ MongoDB
- **–ú–µ—Ç—Ä–∏–∫–∏:** –û–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 6. Node Exporter (–ø–æ—Ä—Ç 9101)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **–ú–µ—Ç—Ä–∏–∫–∏:** CPU, RAM, Disk, Network

---

## üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|---------|----------|
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** | `medhistory_users_total` | –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| | `medhistory_users_active_30d` | –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞ 30 –¥–Ω–µ–π |
| | `medhistory_users_new_30d` | –ù–æ–≤—ã–µ –∑–∞ 30 –¥–Ω–µ–π |
| **–î–æ–∫—É–º–µ–Ω—Ç—ã** | `medhistory_documents_total` | –í—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |
| | `medhistory_documents_new_30d` | –ù–æ–≤—ã–µ –∑–∞ 30 –¥–Ω–µ–π |
| | `medhistory_documents_by_type` | –ü–æ —Ç–∏–ø–∞–º (—Å labels) |
| **AI** | `medhistory_interpretations_total` | –í—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–π |
| | `medhistory_interpretations_success` | –£—Å–ø–µ—à–Ω—ã–µ |
| | `medhistory_interpretations_failed` | –° –æ—à–∏–±–∫–∞–º–∏ |
| **–û—Ç—á–µ—Ç—ã** | `medhistory_reports_total` | –í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤ |
| | `medhistory_reports_new_30d` | –ù–æ–≤—ã–µ –∑–∞ 30 –¥–Ω–µ–π |
| **–•—Ä–∞–Ω–∏–ª–∏—â–µ** | `medhistory_storage_bytes` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –±–∞–π—Ç |
| | `medhistory_storage_objects` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ |

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ |
|-----------|----------|------------------|
| **API** | FastAPI Instrumentator | RPS, –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –æ—à–∏–±–∫–∏ |
| **–°–∏—Å—Ç–µ–º–∞** | Node Exporter | CPU, RAM, Disk I/O, Network |
| **PostgreSQL** | Postgres Exporter | Connections, transactions, DB size |
| **MongoDB** | MongoDB Exporter | Operations, collections, replication |
| **MinIO** | Built-in metrics | Storage usage, operations |

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
monitoring/
‚îú‚îÄ‚îÄ prometheus/
‚îÇ   ‚îú‚îÄ‚îÄ prometheus.yml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
‚îÇ   ‚îú‚îÄ‚îÄ alert_rules.yml         # –ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ targets/                # Targets –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º
‚îú‚îÄ‚îÄ grafana/
‚îÇ   ‚îú‚îÄ‚îÄ grafana.ini            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Grafana
‚îÇ   ‚îú‚îÄ‚îÄ provisioning/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ datasources/       # Prometheus datasource
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboards/        # –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ dashboards/            # JSON –¥–∞—à–±–æ—Ä–¥—ã
‚îÇ       ‚îú‚îÄ‚îÄ business-metrics.json
‚îÇ       ‚îú‚îÄ‚îÄ system-overview.json
‚îÇ       ‚îî‚îÄ‚îÄ api-performance.json
‚îú‚îÄ‚îÄ exporters/
‚îÇ   ‚îú‚îÄ‚îÄ custom_exporter.py     # Python exporter
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ README.md                   # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICKSTART.md              # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îî‚îÄ‚îÄ .env.example               # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
```

### Docker Compose

**Development:** `docker-compose.monitoring.yml`
- –í—Å–µ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

**Production:** `docker-compose.monitoring.prod.yml`
- –¢–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–æ—Å—Ç—É–ø (–∫—Ä–æ–º–µ Grafana)
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
- Auto-restart

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Nginx

–î–æ–±–∞–≤–ª–µ–Ω —Ä–æ—É—Ç `/grafana/` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Grafana —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω:

```nginx
upstream grafana {
    server grafana:3000;
}

location /grafana/ {
    proxy_pass http://grafana/;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
}
```

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### Backend API

#### Endpoint: `/api/v1/metrics/business`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∞–º–∏:
```json
{
  "timestamp": "2025-10-29T12:00:00Z",
  "users": {...},
  "documents": {...},
  "interpretations": {...},
  "reports": {...},
  "storage": {...}
}
```

#### Endpoint: `/metrics`
Prometheus-—Ñ–æ—Ä–º–∞—Ç –º–µ—Ç—Ä–∏–∫ FastAPI (auto-generated)

#### Endpoint: `/api/v1/metrics/health`
Health check –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### Custom Exporter

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ Prometheus
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry
- –ú–µ—Ç—Ä–∏–∫–∏ —Å–∞–º–æ–≥–æ exporter (success/errors)

### –î–∞—à–±–æ—Ä–¥—ã Grafana

#### 1. –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏
- Stat panels: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
- Timeseries: –î–∏–Ω–∞–º–∏–∫–∞ —Ä–æ—Å—Ç–∞
- Pie chart: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- Gauge: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

#### 2. –°–∏—Å—Ç–µ–º–Ω—ã–π –æ–±–∑–æ—Ä
- Gauges: CPU, RAM, Disk usage
- Timeseries: CPU –ø–æ —è–¥—Ä–∞–º, Memory details
- Network traffic, Disk I/O

#### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API
- RPS —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞–º
- Response time percentiles (P50, P95, P99)
- Error rate gauge
- Top endpoints

### –ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤

–ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –¥–ª—è:
- –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ API (>5%)
- –í—ã—Å–æ–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å API (>2s)
- –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU (>80%)
- –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM (>85%)
- –ú–∞–ª–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ (<15%)
- –ú–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ PostgreSQL (>80)
- –û—à–∏–±–∫–∏ AI –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–π (>10%)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd "/Users/boris/Desktop/–ù–∞—á–∞–ª–æ/–ò—Å—Ç–æ—Ä–∏—è –±–æ–ª–µ–∑–Ω–∏"

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./scripts/local/start.sh

# 3. –û—Ç–∫—Ä—ã—Ç—å Grafana
open http://localhost:3000
# –õ–æ–≥–∏–Ω: admin, –ü–∞—Ä–æ–ª—å: admin

# 4. –û—Ç–∫—Ä—ã—Ç—å Prometheus
open http://localhost:9090

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:8000/api/v1/metrics/business | jq
```

### –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
- [ ] Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å–æ –≤—Å–µ—Ö targets
- [ ] Grafana –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞—à–±–æ—Ä–¥—ã
- [ ] Custom Exporter —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ Backend
- [ ] Backend API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
- [ ] –î–∞—à–±–æ—Ä–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] –ê–ª–µ—Ä—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ Prometheus
- [ ] Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ Grafana

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. –°–æ–∑–¥–∞—Ç—å AI –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é
4. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç
5. –û–±–Ω–æ–≤–∏—Ç—å –¥–∞—à–±–æ—Ä–¥—ã –≤ Grafana

---

## üîê –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ

### Development

| –°–µ—Ä–≤–∏—Å | URL | –õ–æ–≥–∏–Ω/–ü–∞—Ä–æ–ª—å |
|--------|-----|--------------|
| Grafana | http://localhost:3000 | admin/admin |
| Prometheus | http://localhost:9090 | - |
| Business Metrics API | http://localhost:8000/api/v1/metrics/business | - |
| Custom Exporter | http://localhost:9100/metrics | - |

### Production

| –°–µ—Ä–≤–∏—Å | URL | –õ–æ–≥–∏–Ω/–ü–∞—Ä–æ–ª—å |
|--------|-----|--------------|
| Grafana | https://your-domain.com/grafana | admin/[—Å–º. .env] |
| Prometheus | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ | - |
| Business Metrics API | https://your-domain.com/api/v1/metrics/business | - |

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Development** (–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
```bash
GF_SECURITY_ADMIN_PASSWORD=admin
GF_SERVER_ROOT_URL=http://localhost:3000
```

**Production** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å!):
```bash
GF_SECURITY_ADMIN_PASSWORD=your_secure_password
GF_SERVER_ROOT_URL=https://your-domain.com/grafana
GF_SERVER_DOMAIN=your-domain.com
```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (–ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º)

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è Grafana
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ endpoints –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS –¥–ª—è Grafana
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–±—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è)

1. **Alertmanager** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
   - Email, Slack, Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ —Ä–æ—É—Ç–∏–Ω–≥ –∞–ª–µ—Ä—Ç–æ–≤

2. **Loki** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grafana
   - –ü–æ–∏—Å–∫ –ø–æ –ª–æ–≥–∞–º

3. **Jaeger** - distributed tracing
   - –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
   - Performance bottlenecks

4. **Custom Dashboards**
   - –î–∞—à–±–æ—Ä–¥—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á
   - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã

5. **Long-term Storage**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å remote storage –¥–ª—è Prometheus
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ >15 –¥–Ω–µ–π

6. **Backup & Recovery**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
   - Disaster recovery –ø–ª–∞–Ω

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

1. **`monitoring/README.md`** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
2. **`monitoring/QUICKSTART.md`** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
3. **`docs/change_log/MONITORING_SYSTEM_IMPLEMENTATION.md`** - –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
4. **`docs/MONITORING_DEPLOYMENT_PLAN.md`** - –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç

### –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã

- [Prometheus Documentation](https://prometheus.io/docs/)
- [Grafana Documentation](https://grafana.com/docs/)
- [Prometheus Best Practices](https://prometheus.io/docs/practices/)
- [FastAPI Prometheus Instrumentator](https://github.com/trallnag/prometheus-fastapi-instrumentator)

---

## ‚ú® –ò—Ç–æ–≥–∏

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
- Prometheus –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
- Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- Custom Exporter –¥–ª—è –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫
- 4 additional exporters (PostgreSQL, MongoDB, Node, MinIO)

‚úÖ **Backend Integration**
- API endpoint –¥–ª—è –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫
- Prometheus instrumentator –¥–ª—è API –º–µ—Ç—Ä–∏–∫
- Health check endpoint

‚úÖ **Visualization**
- 3 –≥–æ—Ç–æ–≤—ã—Ö –¥–∞—à–±–æ—Ä–¥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- Datasource –ø—Ä–µ–¥–Ω–∞—Å—Ç—Ä–æ–µ–Ω

‚úÖ **Deployment**
- Docker Compose –¥–ª—è dev –∏ prod
- Nginx –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞

‚úÖ **Monitoring**
- 8 –ø—Ä–∞–≤–∏–ª –∞–ª–µ—Ä—Ç–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∞–º–æ–π —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

‚úÖ **Documentation**
- –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- Quickstart guide
- Troubleshooting guide

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

üéâ **–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
```bash
./scripts/local/start.sh  # Dev
./scripts/prod/deploy.sh   # Production
```

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 29 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ò –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

