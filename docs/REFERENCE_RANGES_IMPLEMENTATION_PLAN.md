# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–î–∞—Ç–∞:** 15 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω, –≥–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### 1. –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø—Ä–æ–¥–∞–∫—à–Ω MongoDB

‚úÖ **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:**
- 40 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∞–Ω–∞–ª–∏–∑–æ–≤
- 388 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–æ–≤
- 108 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –∞–Ω–∞–ª–∏–∑–æ–≤
- 41 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (—Å –º–∞–ø–ø–∏–Ω–≥–æ–º –∫ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏—è–º)

‚úÖ **–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
1. `backend/scripts/reference_ranges_analysis.json` - –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –º–µ–¥–∏–∞–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤
2. `backend/scripts/reference_ranges_summary.csv` - –∫—Ä–∞—Ç–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
3. `backend/scripts/all_lab_tests_analysis.csv` - –ø–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –í–°–ï–• –∞–Ω–∞–ª–∏–∑–æ–≤ —Å –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏
4. `backend/scripts/all_lab_tests_analysis.json` - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –≤—Å–µ–º –∞–Ω–∞–ª–∏–∑–∞–º
5. `docs/REFERENCE_RANGES.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

‚úÖ **–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:**
1. `backend/scripts/analyze_reference_ranges.py` - –∞–Ω–∞–ª–∏–∑ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤
2. `backend/scripts/analyze_all_lab_tests.py` - –∞–Ω–∞–ª–∏–∑ –í–°–ï–• –∞–Ω–∞–ª–∏–∑–æ–≤ –∏–∑ MongoDB
3. `backend/scripts/import_reference_ranges.py` - –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL
4. `backend/scripts/check_documents_structure.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
5. `backend/scripts/find_users_with_labs.py` - –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–Ω–∞–ª–∏–∑–∞–º–∏

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏

### 1. –í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è

–ú–Ω–æ–≥–∏–µ –∞–Ω–∞–ª–∏–∑—ã –∏–º–µ—é—Ç **–Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è**:

| –ê–Ω–∞–ª–∏–∑ | –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è |
|--------|-------------------|
| –ù–µ–π—Ç—Ä–æ—Ñ–∏–ª—ã | %, 10*9/–ª, 10^9/–ª, —Ç—ã—Å/–º–∫–ª |
| –≠—Ä–∏—Ç—Ä–æ—Ü–∏—Ç—ã | 10*12/–ª, 10^12/–ª, x10*12/–ª, –º–ª–Ω/–º–∫–ª |
| –ì–µ–º–æ–≥–ª–æ–±–∏–Ω | –≥/–¥–ª, –≥/–ª |
| –°–û–≠ | –º–º/—á, –º–º/—á–∞—Å |
| –¢–¢–ì | –º–ú–ï/–ª, –º–∫–ú–ï/–º–ª, –º–ï–¥/–ª |
| –¢3/–¢4 —Å–≤–æ–±–æ–¥–Ω—ã–π | –ø–º–æ–ª—å/–ª, –ø–≥/–º–ª, –Ω–≥/–¥–ª |

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã.

### 2. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∞–Ω–∞–ª–∏–∑—ã –∏–º–µ—é—Ç **—Ä–∞–∑–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã** –≤ —Ä–∞–∑–Ω—ã—Ö –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è—Ö:

| –ê–Ω–∞–ª–∏–∑ | –î–∏–∞–ø–∞–∑–æ–Ω—ã |
|--------|-----------|
| –ù–µ–π—Ç—Ä–æ—Ñ–∏–ª—ã | 1.56-6.13, 1.78-6.04, 40.80-70.39, 47.00-72.00, 48-78 |
| –õ–∏–º—Ñ–æ—Ü–∏—Ç—ã | 1.18-3.74, 1.39-3.15, 19-37, 20.11-46.79 |
| –ö—Ä–µ–∞—Ç–∏–Ω–∏–Ω | 45-84, 58-96 |
| –¢4 —Å–≤–æ–±–æ–¥–Ω—ã–π | 0.80-2.10, 9.00-19.04, 9-19.05, 10.60-22.70 |

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞:
- –†–∞–∑–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (%)–∞–±—Å–æ–ª—é—Ç–Ω–æ–µ vs –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ)
- –†–∞–∑–Ω—ã–µ –º–µ—Ç–æ–¥–∏–∫–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- –†–∞–∑–Ω—ã–µ –ø–æ–ø—É–ª—è—Ü–∏–∏ (–º—É–∂—á–∏–Ω—ã/–∂–µ–Ω—â–∏–Ω—ã, —Ä–∞–∑–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç)

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤

–î–ª—è **–Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤** —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã:
- –ê—Å–ø–∞—Ä—Ç–∞—Ç–∞–º–∏–Ω–æ—Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞–∑–∞ (3 –∏–∑–º–µ—Ä–µ–Ω–∏—è)
- –ê–ª–∞–Ω–∏–Ω–∞–º–∏–Ω–æ—Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞–∑–∞ (3 –∏–∑–º–µ—Ä–µ–Ω–∏—è)
- –•–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω –æ–±—â–∏–π, –õ–ü–í–ü, –õ–ü–ù–ü, –¢—Ä–∏–≥–ª–∏—Ü–µ—Ä–∏–¥—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–æ—Ä–º—É –±–µ–∑ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

### 4. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π

–û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∞–Ω–∞–ª–∏–∑ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å **—Ä–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è**:

| –ì—Ä—É–ø–ø–∞ | –í–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–∑–≤–∞–Ω–∏–π |
|--------|-------------------|
| –¢–¢–ì | –¢–∏—Ä–µ–æ—Ç—Ä–æ–ø–Ω—ã–π –≥–æ—Ä–º–æ–Ω (–¢–¢–ì), –¢–¢–ì |
| –¢4 —Å–≤–æ–±–æ–¥–Ω—ã–π | –¢–∏—Ä–æ–∫—Å–∏–Ω —Å–≤–æ–±–æ–¥–Ω—ã–π (–¢4), –¢4 —Å–≤–æ–±–æ–¥–Ω—ã–π, –¢–∏—Ä–æ–∫—Å–∏–Ω —Å–≤–æ–±–æ–¥–Ω—ã–π (—Å–≤.–¢4), –¢–∏—Ä–æ–∫—Å–∏–Ω —Å–≤–æ–±–æ–¥–Ω—ã–π |
| –¢3 —Å–≤–æ–±–æ–¥–Ω—ã–π | –¢—Ä–∏–π–æ–¥—Ç–∏—Ä–æ–Ω–∏–Ω —Å–≤–æ–±–æ–¥–Ω—ã–π (–¢3), –¢3 —Å–≤–æ–±–æ–¥–Ω—ã–π, –¢—Ä–∏–π–æ–¥—Ç–∏—Ä–æ–Ω–∏–Ω —Å–≤–æ–±–æ–¥–Ω—ã–π (–¢3 —Å–≤.) |

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–∞–ø–ø–∏–Ω–≥ —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `analyte_synonyms`.

---

## üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ (Backend)

#### 1.1. –ò–º–ø–æ—Ä—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ PostgreSQL

```bash
cd backend
python3 scripts/import_reference_ranges.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—è `reference_male_min`, `reference_male_max`, `reference_female_min`, `reference_female_max` –≤ —Ç–∞–±–ª–∏—Ü–µ `analyte_standards`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ–¥–∏–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∞–Ω–∞–ª–∏–∑–∞

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –æ–±–æ–∏—Ö –ø–æ–ª–æ–≤ (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø–æ–ª—É –≤ —Ç–µ–∫—É—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö).

#### 1.2. –°–æ–∑–¥–∞–Ω–∏–µ API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–ù–æ–≤—ã–π endpoint:** `GET /api/analytes/{analyte_id}/reference-ranges`

**Response:**
```json
{
  "analyte_id": "uuid",
  "canonical_name": "–ì–µ–º–æ–≥–ª–æ–±–∏–Ω",
  "standard_unit": "–≥/–ª",
  "reference_ranges": {
    "male": {
      "min": 117.0,
      "max": 155.0
    },
    "female": {
      "min": 117.0,
      "max": 155.0
    }
  },
  "note": "–ó–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏"
}
```

#### 1.3. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è endpoint –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–æ–≤

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å:** `GET /api/documents/{document_id}/lab-results`

**–î–æ–±–∞–≤–∏—Ç—å –≤ response:**
```json
{
  "lab_results": [
    {
      "test_name": "–ì–µ–º–æ–≥–ª–æ–±–∏–Ω",
      "value": "145",
      "unit": "–≥/–ª",
      "reference_range": "117-155",
      "standard_reference": {
        "min": 117.0,
        "max": 155.0,
        "unit": "–≥/–ª"
      },
      "is_standard_unit": true,
      "status": "normal",  // "normal", "high", "low", "unknown"
      "deviation_percent": null
    }
  ]
}
```

---

### –≠—Ç–∞–ø 2: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ Frontend

#### 2.1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–æ–≤

**–§–∞–π–ª:** `frontend/src/components/Documents/LabResultsTable.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É "–ù–æ—Ä–º–∞" —Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
2. –ü–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è:
   - üü¢ –ó–µ–ª–µ–Ω—ã–π: –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã
   - üü° –ñ–µ–ª—Ç—ã–π: –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ (–¥–æ 10%)
   - üî¥ –ö—Ä–∞—Å–Ω—ã–π: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ (>10%)
3. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å tooltip —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

**–ü—Ä–∏–º–µ—Ä UI:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ê–Ω–∞–ª–∏–∑          ‚îÇ –ó–Ω–∞—á–µ–Ω–∏–µ ‚îÇ –ï–¥–∏–Ω–∏—Ü–∞ ‚îÇ –ù–æ—Ä–º–∞          ‚îÇ –°—Ç–∞—Ç—É—Å ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ì–µ–º–æ–≥–ª–æ–±–∏–Ω      ‚îÇ 145      ‚îÇ –≥/–ª     ‚îÇ 117 - 155      ‚îÇ üü¢     ‚îÇ
‚îÇ –õ–µ–π–∫–æ—Ü–∏—Ç—ã       ‚îÇ 12.5     ‚îÇ 10‚Åπ/–ª   ‚îÇ 4.5 - 11.0     ‚îÇ üü°     ‚îÇ
‚îÇ –ö—Ä–µ–∞—Ç–∏–Ω–∏–Ω       ‚îÇ 120      ‚îÇ –º–∫–º–æ–ª—å/–ª‚îÇ 45 - 84        ‚îÇ üî¥     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 2.2. –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∞–Ω–∞–ª–∏–∑–∞

–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
- –ì—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º–µ–Ω–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—è)
- –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –æ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –µ–¥–∏–Ω–∏—Ü–∞—Ö –∏–∑–º–µ—Ä–µ–Ω–∏—è

---

### –≠—Ç–∞–ø 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases

#### 3.1. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è

–î–ª—è –∞–Ω–∞–ª–∏–∑–æ–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:

```python
# backend/app/services/unit_converter.py

CONVERSION_RULES = {
    '–ì–µ–º–æ–≥–ª–æ–±–∏–Ω': {
        '–≥/–¥–ª': {'to_g/l': 10.0},  # 1 –≥/–¥–ª = 10 –≥/–ª
    },
    '–¢4 —Å–≤–æ–±–æ–¥–Ω—ã–π': {
        '–Ω–≥/–¥–ª': {'to_pmol/l': 12.87},  # 1 –Ω–≥/–¥–ª = 12.87 –ø–º–æ–ª—å/–ª
    },
    # ... –¥—Ä—É–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞
}

def convert_unit(value: float, from_unit: str, to_unit: str, analyte: str) -> float:
    """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –æ–¥–Ω–æ–π –µ–¥–∏–Ω–∏—Ü—ã –≤ –¥—Ä—É–≥—É—é"""
    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
    pass
```

#### 3.2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

–ï—Å–ª–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –Ω–µ—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:
1. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å "‚Äî" –≤ –∫–æ–ª–æ–Ω–∫–µ "–ù–æ—Ä–º–∞"
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–ª–∞–≥ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (N/H/L)
3. –î–æ–±–∞–≤–∏—Ç—å tooltip: "–†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã"

#### 3.3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤

–î–ª—è –∞–Ω–∞–ª–∏–∑–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏ (% vs –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ):
1. –û–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ç–∏–ø –ø–æ –µ–¥–∏–Ω–∏—Ü–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω
3. –ï—Å–ª–∏ –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞

---

### –≠—Ç–∞–ø 4: –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö

#### 4.1. –°–±–æ—Ä –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

- –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–±–æ—Ä —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –†–∞–∑–ª–∏—á–∞—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã –ø–æ –ø–æ–ª—É –∏ –≤–æ–∑—Ä–∞—Å—Ç—É
- –°–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –º–µ—Ç–æ–¥–∏–∫–∞—Ö –∏–∑–º–µ—Ä–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–π

#### 4.2. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –Ω–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
1. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
3. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–æ–º–∞–ª–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

#### 4.3. –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å:
- –°–æ–æ–±—â–∏—Ç—å –æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
- –£–∫–∞–∑–∞—Ç—å –ø–æ–ª/–≤–æ–∑—Ä–∞—Å—Ç –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤

---

## üìä –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (MVP)
1. ‚úÖ –ò–º–ø–æ—Ä—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –ë–î
2. üî≤ API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤
3. üî≤ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ "–ù–æ—Ä–º–∞" –≤ —Ç–∞–±–ª–∏—Ü–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. üî≤ –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π (üü¢üü°üî¥)

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
5. üî≤ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
6. üî≤ –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
7. üî≤ –ì—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º–µ–Ω–∏
8. üî≤ Tooltip —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
9. üî≤ –†–∞–∑–ª–∏—á–∏–µ –ø–æ –ø–æ–ª—É –∏ –≤–æ–∑—Ä–∞—Å—Ç—É
10. üî≤ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
11. üî≤ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î

**–¢–∞–±–ª–∏—Ü–∞:** `analyte_standards`

–ü–æ–ª—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç:
- `reference_male_min` (Numeric)
- `reference_male_max` (Numeric)
- `reference_female_min` (Numeric)
- `reference_female_max` (Numeric)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `reference_age_ranges` (JSONB) - –¥–∏–∞–ø–∞–∑–æ–Ω—ã –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É
- `reference_notes` (Text) - –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- `reference_updated_at` (Timestamp) - –∫–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å

### API –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ù–æ–≤—ã–µ endpoints:**
```
GET /api/analytes/{id}/reference-ranges
GET /api/analytes/search?name={name}
POST /api/reference-ranges/feedback
```

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ endpoints:**
```
GET /api/documents/{id}/lab-results
  + –¥–æ–±–∞–≤–∏—Ç—å standard_reference –≤ response
```

### Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```typescript
// src/components/Documents/ReferenceRangeIndicator.tsx
// src/components/Documents/LabResultCard.tsx
// src/components/Documents/AnalyteHistoryChart.tsx
```

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```typescript
// src/components/Documents/LabResultsTable.tsx
  + –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É "–ù–æ—Ä–º–∞"
  + –¥–æ–±–∞–≤–∏—Ç—å —Ü–≤–µ—Ç–æ–≤—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é
  + –¥–æ–±–∞–≤–∏—Ç—å tooltips
```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (—Å–µ–≥–æ–¥–Ω—è)
1. ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
3. üî≤ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ
4. üî≤ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API endpoints
5. üî≤ –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
6. üî≤ –î–æ–±–∞–≤–∏—Ç—å unit tests

### –ù–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ
7. üî≤ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
8. üî≤ –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
9. üî≤ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

---

## üéì Lessons Learned

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ
‚úÖ –ú–µ–¥–∏–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —É—Å—Ç–æ–π—á–∏–≤—ã –∫ –≤—ã–±—Ä–æ—Å–∞–º  
‚úÖ –ú–∞–ø–ø–∏–Ω–≥ —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –ø–æ–º–æ–≥–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è  
‚úÖ JSON —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è metadata –≥–∏–±–∫–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å
‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª–µ –∏ –≤–æ–∑—Ä–∞—Å—Ç–µ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤  
‚ö†Ô∏è –í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ  
‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∞–Ω–∞–ª–∏–∑—ã –Ω–µ –∏–º–µ—é—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
üí° –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –ø–æ–ª/–≤–æ–∑—Ä–∞—Å—Ç –≤ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
üí° –°–æ–∑–¥–∞—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è  
üí° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∫–∞–∫ fallback

---

**–ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª:** AI Assistant  
**–î–∞—Ç–∞:** 15 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0
