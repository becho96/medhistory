# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–î–∞—Ç–∞:** 18 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ ‚úÖ

## üìã –¶–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ–¥ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ `–¢–ó/DOCUMENT_CLASSIFICATION_RULES.md`.

---

## üîÑ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è:**
- **PostgreSQL** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- **MongoDB** ‚Äî –≥–∏–±–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

```
AI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π JSON ‚Üí Backend —Ä–∞–∑–¥–µ–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ ‚Üí PostgreSQL + MongoDB
```

---

## üìä –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ PostgreSQL (–º–æ–¥–µ–ª—å Document)

### –£–¥–∞–ª–µ–Ω—ã –ø–æ–ª—è:
- ‚ùå `specialty` (String) ‚Äî –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ MongoDB –∫–∞–∫ –º–∞—Å—Å–∏–≤ `specialties`
- ‚ùå `document_language` (String) ‚Äî –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ MongoDB
- ‚ùå `ai_confidence_score` (Float) ‚Äî –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ MongoDB

### –û—Å—Ç–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:
- ‚úÖ `document_type` ‚Äî –æ–¥–∏–Ω –∏–∑ 5 —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤
- ‚úÖ `document_date` ‚Äî –¥–∞—Ç–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã/–ø—Ä–∏–µ–º–∞
- ‚úÖ `patient_name` ‚Äî –§–ò–û –ø–∞—Ü–∏–µ–Ω—Ç–∞
- ‚úÖ `medical_facility` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —É—á—Ä–µ–∂–¥–µ–Ω–∏—è

### –ú–∏–≥—Ä–∞—Ü–∏—è:
```sql
-- backend/migrations/002_update_document_classification.sql
ALTER TABLE documents DROP COLUMN IF EXISTS specialty;
ALTER TABLE documents DROP COLUMN IF EXISTS document_language;
ALTER TABLE documents DROP COLUMN IF EXISTS ai_confidence_score;
```

---

## üì¶ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ MongoDB (document_metadata)

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```javascript
{
  "document_id": "uuid",
  "user_id": "uuid",
  
  // –û–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–Ω–æ–≤—ã–π!)
  "classification": {
    "document_subtype": "–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏",      // –ü–æ–¥—Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞
    "research_area": "–ë—Ä—é—à–Ω–∞—è –ø–æ–ª–æ—Å—Ç—å",             // –û–±–ª–∞—Å—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
    "specialties": ["–ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è", "–¢–µ—Ä–∞–ø–∏—è"],      // –ú–∞—Å—Å–∏–≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π
    "document_language": "ru",                       // –Ø–∑—ã–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    "confidence": 0.95                               // –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å AI
  },
  
  // –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  "extracted_data": {
    "summary": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ...",
    "lab_results": [...]  // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–æ–≤
  },
  
  // –ú–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± AI
  "ai_response": {
    "model": "anthropic/claude-3.5-sonnet",
    "confidence": 0.95
  }
}
```

---

## üéØ –¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (5 —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π)

| –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ | document_subtype | research_area | specialties |
|--------------|------------------|---------------|-------------|
| **–ü—Ä–∏–µ–º –≤—Ä–∞—á–∞** | ‚ùå null | ‚ùå null | ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** (–º–∞—Å—Å–∏–≤) |
| **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞** | ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** | ‚ùå null | ‚ùå null |
| **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** | ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** | ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | ‚ùå null |
| **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** | ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** | ‚ùå null | ‚ùå null |
| **–î—Ä—É–≥–æ–µ** | ‚ùå null | ‚ùå null | ‚ùå null |

---

## ü§ñ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AI –ø—Ä–æ–º–ø—Ç–∞

### –ù–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –≤–∫–ª—é—á–∞–µ—Ç:

1. **5 —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** —Å —á–µ—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
2. **–ü—Ä–∞–≤–∏–ª–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ —Ç–∏–ø–∞–º** ‚Äî –∫–∞–∫–∏–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
3. **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π**:
   - –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ (19 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö)
   - –ü–æ–¥—Ç–∏–ø—ã –∞–Ω–∞–ª–∏–∑–æ–≤ (12 —Ç–∏–ø–æ–≤)
   - –¢–∏–ø—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π (8 —Ç–∏–ø–æ–≤)
   - –û–±–ª–∞—Å—Ç–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π (–¥–ª—è –£–ó–ò, –ú–†–¢, –ö–¢, –†–µ–Ω—Ç–≥–µ–Ω)
   - –¢–∏–ø—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (10 —Ç–∏–ø–æ–≤)
4. **–ü—Ä–∞–≤–∏–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏**:
   - –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ ‚Äî —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ ("–ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è", –Ω–µ "–ö–∞—Ä–¥–∏–æ–ª–æ–≥")
   - –§–æ—Ä–º–∞—Ç –§–ò–û: "–ò–≤–∞–Ω–æ–≤ –ò.–ò."
   - –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã: YYYY-MM-DD
5. **–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞**: confidence score –∏ summary

---

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### 1. –°—Ö–µ–º—ã Pydantic (`app/schemas/document.py`)

```python
class DocumentMetadata(BaseModel):
    # PostgreSQL fields
    document_type: str  # Required
    document_date: Optional[date] = None
    patient_name: Optional[str] = None
    medical_facility: Optional[str] = None
    
    # MongoDB classification fields
    document_subtype: Optional[str] = None
    research_area: Optional[str] = None
    specialties: Optional[list[str]] = None  # Array!
    document_language: Optional[str] = "ru"
    confidence: Optional[float] = None
    
    # MongoDB extracted_data fields
    summary: Optional[str] = None
```

### 2. AI Service (`app/services/ai_service.py`)

- ‚úÖ –ù–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–∞—Å—Å–∏–≤–∞ `specialties`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

### 3. Document Service (`app/services/document_service.py`)

```python
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL (—Ç–æ–ª—å–∫–æ –º–∏–Ω–∏–º—É–º)
document.document_type = metadata.document_type
document.document_date = metadata.document_date
document.patient_name = metadata.patient_name
document.medical_facility = metadata.medical_facility

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ MongoDB (classification + extracted_data)
mongo_doc = {
    "classification": {
        "document_subtype": metadata.document_subtype,
        "research_area": metadata.research_area,
        "specialties": metadata.specialties,  # –ú–∞—Å—Å–∏–≤
        "document_language": metadata.document_language,
        "confidence": metadata.confidence
    },
    "extracted_data": {
        "summary": metadata.summary,
    }
}
```

### 4. API Endpoints

**–û–±–Ω–æ–≤–ª–µ–Ω—ã:**
- `GET /api/v1/documents/` ‚Äî —É–±—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `specialty`
- `GET /api/v1/timeline/` ‚Äî —É–±—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `specialty`, specialties –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ MongoDB
- `GET /api/v1/timeline/stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ specialties –∏–∑ MongoDB
- `GET /api/v1/admin/documents` ‚Äî —É–±—Ä–∞–Ω—ã –ø–æ–ª—è `specialty`, `document_language`, `ai_confidence_score`

**TimelineEvent —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç specialties –∏–∑ MongoDB:**
```python
# –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ MongoDB
specialties_by_doc_id = {}
for mongo_doc in mongo_docs:
    specialties = mongo_doc["classification"]["specialties"]
    if specialties:
        specialties_by_doc_id[doc_id] = ", ".join(specialties)
```

### 5. Report Service (`app/services/report_service.py`)

- ‚ùå –£–±—Ä–∞–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `specialty`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `patient_name`
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω —Ç–∏–ø –æ—Ç—á–µ—Ç–∞ –¥–æ `"medical_history"`

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ü—Ä–∏–µ–º –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞
```json
{
  "document_type": "–ü—Ä–∏–µ–º –≤—Ä–∞—á–∞",
  "document_subtype": null,
  "research_area": null,
  "specialties": ["–ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è"],
  "document_date": "2024-03-15",
  "patient_name": "–ò–≤–∞–Ω–æ–≤ –ü.–ò.",
  "confidence": 0.95
}
```

### –û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏
```json
{
  "document_type": "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞",
  "document_subtype": "–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏",
  "research_area": null,
  "specialties": null,
  "document_date": "2024-03-20",
  "confidence": 0.98
}
```

### –£–ó–ò –±—Ä—é—à–Ω–æ–π –ø–æ–ª–æ—Å—Ç–∏
```json
{
  "document_type": "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ",
  "document_subtype": "–£–ó–ò",
  "research_area": "–ë—Ä—é—à–Ω–∞—è –ø–æ–ª–æ—Å—Ç—å",
  "specialties": null,
  "document_date": "2024-03-25",
  "confidence": 0.92
}
```

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### PostgreSQL (–±—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- ‚úÖ –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `document_type`
- ‚úÖ –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `document_date`
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞
- ‚úÖ –°—Å—ã–ª–æ—á–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å (foreign keys)

### MongoDB (–≥–∏–±–∫–æ—Å—Ç—å)
- ‚úÖ –ú–∞—Å—Å–∏–≤—ã –±–µ–∑ junction tables (`specialties[]`)
- ‚úÖ –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (`classification`, `extracted_data`)
- ‚úÖ –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üîç –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
psql -U postgres -d medhistory -f backend/migrations/002_update_document_classification.sql
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º
docker-compose build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d
```

### 3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```python
# –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ specialty –±—É–¥–µ—Ç –≤ PostgreSQL
# –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö:
# - –ü—Ä–æ—á–∏—Ç–∞—Ç—å specialty –∏–∑ PostgreSQL
# - –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ MongoDB –∫–∞–∫ specialties = [specialty]
# - –î–æ–±–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–µ classification –ø–æ–ª—è –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: —Å—Ç–∞—Ä—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å –ø–æ–ª–µ–º `specialty` –≤ PostgreSQL –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –Ω–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç MongoDB.

2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—è–º**: —Ç–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ MongoDB —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ ID:
   ```javascript
   // 1. –ù–∞–π—Ç–∏ document_id –≤ MongoDB –ø–æ specialty
   // 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ PostgreSQL –ø–æ –Ω–∞–π–¥–µ–Ω–Ω—ã–º ID
   ```

3. **Frontend**: –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ:
   - –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç specialty (—Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –±—ã—Ç—å –º–∞—Å—Å–∏–≤)
   - –§–∏–ª—å—Ç—Ä—É—é—Ç –ø–æ specialty (–Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π endpoint)
   - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç document_subtype –∏ research_area

4. **API –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
   - –£–±—Ä–∞–Ω query –ø–∞—Ä–∞–º–µ—Ç—Ä `specialty` –∏–∑ `/api/v1/documents/`
   - `TimelineEvent.specialty` —Ç–µ–ø–µ—Ä—å —Å—Ç—Ä–æ–∫–∞ (join –º–∞—Å—Å–∏–≤–∞ –∏–∑ MongoDB)

---

## üìö –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

### –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ (19 —Ç–∏–ø–æ–≤)
–¢–µ—Ä–∞–ø–∏—è, –ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è, –ù–µ–≤—Ä–æ–ª–æ–≥–∏—è, –ì–∞—Å—Ç—Ä–æ—ç–Ω—Ç–µ—Ä–æ–ª–æ–≥–∏—è, –≠–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥–∏—è, –£—Ä–æ–ª–æ–≥–∏—è, –û—Ç–æ—Ä–∏–Ω–æ–ª–∞—Ä–∏–Ω–≥–æ–ª–æ–≥–∏—è (–õ–û–†), –û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è, –¢—Ä–∞–≤–º–∞—Ç–æ–ª–æ–≥–∏—è –∏ –æ—Ä—Ç–æ–ø–µ–¥–∏—è, –î–µ—Ä–º–∞—Ç–æ–ª–æ–≥–∏—è, –ò–Ω—Ñ–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –±–æ–ª–µ–∑–Ω–∏, –†–µ–≤–º–∞—Ç–æ–ª–æ–≥–∏—è, –ü—É–ª—å–º–æ–Ω–æ–ª–æ–≥–∏—è, –ù–µ—Ñ—Ä–æ–ª–æ–≥–∏—è, –û–Ω–∫–æ–ª–æ–≥–∏—è, –•–∏—Ä—É—Ä–≥–∏—è, –ê–∫—É—à–µ—Ä—Å—Ç–≤–æ –∏ –≥–∏–Ω–µ–∫–æ–ª–æ–≥–∏—è, –ü–µ–¥–∏–∞—Ç—Ä–∏—è, –ü—Å–∏—Ö–∏–∞—Ç—Ä–∏—è, –î—Ä—É–≥–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å

### –ü–æ–¥—Ç–∏–ø—ã –∞–Ω–∞–ª–∏–∑–æ–≤ (12 —Ç–∏–ø–æ–≤)
–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏, –ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏, –û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –º–æ—á–∏, –ê–Ω–∞–ª–∏–∑ –∫–∞–ª–∞, –ë–∞–∫—Ç–µ—Ä–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –°–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –ì–∏—Å—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –¶–∏—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –ò–º–º—É–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –ì–æ—Ä–º–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –ì–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –î—Ä—É–≥–æ–π –∞–Ω–∞–ª–∏–∑

### –¢–∏–ø—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π (8 —Ç–∏–ø–æ–≤)
–£–ó–ò, –ú–†–¢, –ö–¢, –†–µ–Ω—Ç–≥–µ–Ω, –ú–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è, –§–ª—é–æ—Ä–æ–≥—Ä–∞—Ñ–∏—è, –ê–Ω–≥–∏–æ–≥—Ä–∞—Ñ–∏—è, –î—Ä—É–≥–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

### –¢–∏–ø—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (10 —Ç–∏–ø–æ–≤)
–≠–ö–ì (—ç–ª–µ–∫—Ç—Ä–æ–∫–∞—Ä–¥–∏–æ–≥—Ä–∞—Ñ–∏—è), –≠–≠–ì (—ç–ª–µ–∫—Ç—Ä–æ—ç–Ω—Ü–µ—Ñ–∞–ª–æ–≥—Ä–∞—Ñ–∏—è), –•–æ–ª—Ç–µ—Ä-–º–æ–Ω–∏—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ, –°—É—Ç–æ—á–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ê–î, –°–ø–∏—Ä–æ–º–µ—Ç—Ä–∏—è, –í–µ–ª–æ—ç—Ä–≥–æ–º–µ—Ç—Ä–∏—è, –§–ì–î–° (—Ñ–∏–±—Ä–æ–≥–∞—Å—Ç—Ä–æ–¥—É–æ–¥–µ–Ω–æ—Å–∫–æ–ø–∏—è), –ö–æ–ª–æ–Ω–æ—Å–∫–æ–ø–∏—è, –ë—Ä–æ–Ω—Ö–æ—Å–∫–æ–ø–∏—è, –î—Ä—É–≥–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏–∑ `–¢–ó/DOCUMENT_CLASSIFICATION_RULES.md`:
- ‚úÖ 5 —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É PostgreSQL –∏ MongoDB
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—Å–∏–≤–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π
- ‚úÖ –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤
- ‚úÖ AI –ø—Ä–æ–º–ø—Ç –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞

---

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:** 18 –æ–∫—Ç—è–±—Ä—è 2025

