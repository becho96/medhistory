# –ü—Ä–æ–º–ø—Ç –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è  
**–§—É–Ω–∫—Ü–∏—è:** `_build_extraction_prompt()` –≤ `app/services/ai_service.py`  
**–ú–æ–¥–µ–ª—å:** Claude 3.5 Sonnet (—á–µ—Ä–µ–∑ OpenRouter)

---

## üì§ –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –ø—Ä–æ–º–ø—Ç–∞

```
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–æ—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –∏ –∏–∑–≤–ª–µ–∫–∏ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê JSON:

{
  "document_type": "–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û - –æ–¥–∏–Ω –∏–∑ 5 —Ç–∏–ø–æ–≤",
  "document_subtype": "—É—Å–ª–æ–≤–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",
  "research_area": "—Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π",
  "specialties": ["–º–∞—Å—Å–∏–≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π"],
  "document_date": "YYYY-MM-DD",
  "patient_name": "–§–∞–º–∏–ª–∏—è –ò.–û.",
  "medical_facility": "–Ω–∞–∑–≤–∞–Ω–∏–µ —É—á—Ä–µ–∂–¥–µ–Ω–∏—è",
  "document_language": "ru|en",
  "confidence": 0.95,
  "summary": "–∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ"
}

# –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í (–≤—ã–±–µ—Ä–∏ –û–î–ò–ù –∏–∑ 5):

1. "–ü—Ä–∏–µ–º –≤—Ä–∞—á–∞" - –∞–º–±—É–ª–∞—Ç–æ—Ä–Ω—ã–π –ø—Ä–∏–µ–º, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ –≤—Ä–∞—á–∞
2. "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞" - –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã –ª—é–±–æ–≥–æ —Ç–∏–ø–∞
3. "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ" - –£–ó–ò, –ú–†–¢, –ö–¢, —Ä–µ–Ω—Ç–≥–µ–Ω, –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è
4. "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞" - –≠–ö–ì, –≠–≠–ì, —Ö–æ–ª—Ç–µ—Ä, —Å–ø–∏—Ä–æ–º–µ—Ç—Ä–∏—è, –§–ì–î–°, –∫–æ–ª–æ–Ω–æ—Å–∫–æ–ø–∏—è
5. "–î—Ä—É–≥–æ–µ" - –µ—Å–ª–∏ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –Ω–∏ –ø–æ–¥ –æ–¥–Ω—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é

# –ü–†–ê–í–ò–õ–ê –ó–ê–ü–û–õ–ù–ï–ù–ò–Ø –ü–û –¢–ò–ü–ê–ú:

## "–ü—Ä–∏–µ–º –≤—Ä–∞—á–∞":
- specialties: ["–ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è", "–¢–µ—Ä–∞–ø–∏—è"] - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –º–∞—Å—Å–∏–≤ (–º–∏–Ω–∏–º—É–º 1)
- document_subtype: null
- research_area: null

–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π: –¢–µ—Ä–∞–ø–∏—è, –ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è, –ù–µ–≤—Ä–æ–ª–æ–≥–∏—è, –ì–∞—Å—Ç—Ä–æ—ç–Ω—Ç–µ—Ä–æ–ª–æ–≥–∏—è, –≠–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥–∏—è, –£—Ä–æ–ª–æ–≥–∏—è, –û—Ç–æ—Ä–∏–Ω–æ–ª–∞—Ä–∏–Ω–≥–æ–ª–æ–≥–∏—è (–õ–û–†), –û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è, –¢—Ä–∞–≤–º–∞—Ç–æ–ª–æ–≥–∏—è –∏ –æ—Ä—Ç–æ–ø–µ–¥–∏—è, –î–µ—Ä–º–∞—Ç–æ–ª–æ–≥–∏—è, –ò–Ω—Ñ–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –±–æ–ª–µ–∑–Ω–∏, –†–µ–≤–º–∞—Ç–æ–ª–æ–≥–∏—è, –ü—É–ª—å–º–æ–Ω–æ–ª–æ–≥–∏—è, –ù–µ—Ñ—Ä–æ–ª–æ–≥–∏—è, –û–Ω–∫–æ–ª–æ–≥–∏—è, –•–∏—Ä—É—Ä–≥–∏—è, –ê–∫—É—à–µ—Ä—Å—Ç–≤–æ –∏ –≥–∏–Ω–µ–∫–æ–ª–æ–≥–∏—è, –ü–µ–¥–∏–∞—Ç—Ä–∏—è, –ü—Å–∏—Ö–∏–∞—Ç—Ä–∏—è, –î—Ä—É–≥–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å

## "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞":
- document_subtype: "–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏" - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
- specialties: null
- research_area: null

–ü–æ–¥—Ç–∏–ø—ã: –û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏, –ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏, –û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –º–æ—á–∏, –ê–Ω–∞–ª–∏–∑ –∫–∞–ª–∞, –ë–∞–∫—Ç–µ—Ä–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –°–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –ì–∏—Å—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –¶–∏—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –ò–º–º—É–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –ì–æ—Ä–º–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –ì–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –î—Ä—É–≥–æ–π –∞–Ω–∞–ª–∏–∑

## "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ":
- document_subtype: "–£–ó–ò" - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
- research_area: "–ë—Ä—é—à–Ω–∞—è –ø–æ–ª–æ—Å—Ç—å" - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- specialties: null

–ü–æ–¥—Ç–∏–ø—ã: –£–ó–ò, –ú–†–¢, –ö–¢, –†–µ–Ω—Ç–≥–µ–Ω, –ú–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è, –§–ª—é–æ—Ä–æ–≥—Ä–∞—Ñ–∏—è, –ê–Ω–≥–∏–æ–≥—Ä–∞—Ñ–∏—è, –î—Ä—É–≥–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

–û–±–ª–∞—Å—Ç–∏ –¥–ª—è –£–ó–ò: –ë—Ä—é—à–Ω–∞—è –ø–æ–ª–æ—Å—Ç—å, –©–∏—Ç–æ–≤–∏–¥–Ω–∞—è –∂–µ–ª–µ–∑–∞, –ú–æ–ª–æ—á–Ω—ã–µ –∂–µ–ª–µ–∑—ã, –û—Ä–≥–∞–Ω—ã –º–∞–ª–æ–≥–æ —Ç–∞–∑–∞, –°–µ—Ä–¥—Ü–µ (–≠—Ö–æ–ö–ì), –°–æ—Å—É–¥—ã, –°—É—Å—Ç–∞–≤—ã, –ú—è–≥–∫–∏–µ —Ç–∫–∞–Ω–∏, –î—Ä—É–≥–∞—è –æ–±–ª–∞—Å—Ç—å

–û–±–ª–∞—Å—Ç–∏ –¥–ª—è –ú–†–¢/–ö–¢: –ì–æ–ª–æ–≤–Ω–æ–π –º–æ–∑–≥, –ü–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫, –ë—Ä—é—à–Ω–∞—è –ø–æ–ª–æ—Å—Ç—å, –ì—Ä—É–¥–Ω–∞—è –∫–ª–µ—Ç–∫–∞, –°—É—Å—Ç–∞–≤—ã, –ú—è–≥–∫–∏–µ —Ç–∫–∞–Ω–∏, –°–æ—Å—É–¥—ã, –î—Ä—É–≥–∞—è –æ–±–ª–∞—Å—Ç—å

–û–±–ª–∞—Å—Ç–∏ –¥–ª—è –†–µ–Ω—Ç–≥–µ–Ω: –ì—Ä—É–¥–Ω–∞—è –∫–ª–µ—Ç–∫–∞, –ü–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫, –°—É—Å—Ç–∞–≤—ã, –ö–æ—Å—Ç–∏ –∫–æ–Ω–µ—á–Ω–æ—Å—Ç–µ–π, –ß–µ—Ä–µ–ø–∞, –î—Ä—É–≥–∞—è –æ–±–ª–∞—Å—Ç—å

## "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞":
- document_subtype: "–≠–ö–ì (—ç–ª–µ–∫—Ç—Ä–æ–∫–∞—Ä–¥–∏–æ–≥—Ä–∞—Ñ–∏—è)" - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
- specialties: null
- research_area: null

–ü–æ–¥—Ç–∏–ø—ã: –≠–ö–ì (—ç–ª–µ–∫—Ç—Ä–æ–∫–∞—Ä–¥–∏–æ–≥—Ä–∞—Ñ–∏—è), –≠–≠–ì (—ç–ª–µ–∫—Ç—Ä–æ—ç–Ω—Ü–µ—Ñ–∞–ª–æ–≥—Ä–∞—Ñ–∏—è), –•–æ–ª—Ç–µ—Ä-–º–æ–Ω–∏—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ, –°—É—Ç–æ—á–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ê–î, –°–ø–∏—Ä–æ–º–µ—Ç—Ä–∏—è, –í–µ–ª–æ—ç—Ä–≥–æ–º–µ—Ç—Ä–∏—è, –§–ì–î–° (—Ñ–∏–±—Ä–æ–≥–∞—Å—Ç—Ä–æ–¥—É–æ–¥–µ–Ω–æ—Å–∫–æ–ø–∏—è), –ö–æ–ª–æ–Ω–æ—Å–∫–æ–ø–∏—è, –ë—Ä–æ–Ω—Ö–æ—Å–∫–æ–ø–∏—è, –î—Ä—É–≥–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## "–î—Ä—É–≥–æ–µ":
- –í—Å–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
- confidence –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∏–∑–∫–æ–π (<0.5)

# –û–ë–©–ò–ï –ü–†–ê–í–ò–õ–ê:

1. document_type - –í–°–ï–ì–î–ê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û, –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ
2. –î–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ - —ç—Ç–æ –¥–∞—Ç–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã/–ø—Ä–∏–µ–º–∞, –ù–ï –¥–∞—Ç–∞ –ø–µ—á–∞—Ç–∏
3. –§–æ—Ä–º–∞—Ç –§–ò–û: "–ò–≤–∞–Ω–æ–≤ –ò.–ò." (—Å —Ç–æ—á–∫–∞–º–∏)
4. –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ - –°–£–©–ï–°–¢–í–ò–¢–ï–õ–¨–ù–´–ï: "–ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è", –∞ –ù–ï "–ö–∞—Ä–¥–∏–æ–ª–æ–≥"
5. –ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ - –∏—Å–ø–æ–ª—å–∑—É–π null
6. confidence (0.0-1.0) - —Ç–≤–æ—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
7. document_language - –∫–æ–¥ —è–∑—ã–∫–∞ ("ru", "en")

# –í–ê–ñ–ù–û:
- –û—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –≤–∞–ª–∏–¥–Ω—ã–º JSON
- –ë–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∏–ø—É –¥–æ–∫—É–º–µ–Ω—Ç–∞
```

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞:**
   - –î–ª—è PDF: –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ PyPDF2
   - –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (JPG/PNG): –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è base64 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Vision API

2. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞:**
   ```
   –ü—Ä–æ–º–ø—Ç + "–¢–µ–∫—Å—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:\n\n{—Ç–µ–∫—Å—Ç_–¥–æ–∫—É–º–µ–Ω—Ç–∞}"
   ```
   
   –ò–ª–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
   ```
   –ü—Ä–æ–º–ø—Ç + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ base64
   ```

3. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã API:**
   - `model`: "anthropic/claude-3.5-sonnet"
   - `temperature`: 0.1 (–Ω–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏)
   - `max_tokens`: 2000

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞:**
   - –ü–∞—Ä—Å–∏–Ω–≥ JSON –∏–∑ –æ—Ç–≤–µ—Ç–∞
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ markdown –±–ª–æ–∫–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ `DocumentMetadata`
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É PostgreSQL –∏ MongoDB

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ AI

### –ü—Ä–∏–µ–º –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞
```json
{
  "document_type": "–ü—Ä–∏–µ–º –≤—Ä–∞—á–∞",
  "document_subtype": null,
  "research_area": null,
  "specialties": ["–ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è"],
  "document_date": "2024-03-15",
  "patient_name": "–ò–≤–∞–Ω–æ–≤ –ü.–ò.",
  "medical_facility": "–ì–ë–£–ó –ì–ö–ë ‚Ññ1",
  "document_language": "ru",
  "confidence": 0.95,
  "summary": "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞. –ü–∞—Ü–∏–µ–Ω—Ç –∂–∞–ª—É–µ—Ç—Å—è –Ω–∞ –±–æ–ª–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ —Å–µ—Ä–¥—Ü–∞. –î–∏–∞–≥–Ω–æ–∑: –ò–ë–°, —Å—Ç–µ–Ω–æ–∫–∞—Ä–¥–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è."
}
```

### –û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏
```json
{
  "document_type": "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞",
  "document_subtype": "–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏",
  "research_area": null,
  "specialties": null,
  "document_date": "2024-03-20",
  "patient_name": "–°–∏–¥–æ—Ä–æ–≤–∞ –ú.–ê.",
  "medical_facility": "–ò–Ω–≤–∏—Ç—Ä–æ",
  "document_language": "ru",
  "confidence": 0.98,
  "summary": "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫—Ä–æ–≤–∏ –æ—Ç 20.03.2024"
}
```

### –£–ó–ò –±—Ä—é—à–Ω–æ–π –ø–æ–ª–æ—Å—Ç–∏
```json
{
  "document_type": "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ",
  "document_subtype": "–£–ó–ò",
  "research_area": "–ë—Ä—é—à–Ω–∞—è –ø–æ–ª–æ—Å—Ç—å",
  "specialties": null,
  "document_date": "2024-03-25",
  "patient_name": "–ü–µ—Ç—Ä–æ–≤ –ê.–ò.",
  "medical_facility": "–ö–ª–∏–Ω–∏–∫–∞ –°–µ–º–µ–π–Ω–∞—è",
  "document_language": "ru",
  "confidence": 0.92,
  "summary": "–£–ó–ò –æ—Ä–≥–∞–Ω–æ–≤ –±—Ä—é—à–Ω–æ–π –ø–æ–ª–æ—Å—Ç–∏. –ü–µ—á–µ–Ω—å: —Ä–∞–∑–º–µ—Ä—ã –Ω–µ —É–≤–µ–ª–∏—á–µ–Ω—ã. –ñ–µ–ª—á–Ω—ã–π –ø—É–∑—ã—Ä—å: –±–µ–∑ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π."
}
```

### –≠–ö–ì
```json
{
  "document_type": "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞",
  "document_subtype": "–≠–ö–ì (—ç–ª–µ–∫—Ç—Ä–æ–∫–∞—Ä–¥–∏–æ–≥—Ä–∞—Ñ–∏—è)",
  "research_area": null,
  "specialties": null,
  "document_date": "2024-03-10",
  "patient_name": "–ö–æ–∑–ª–æ–≤–∞ –ï.–°.",
  "medical_facility": "–ü–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ5",
  "document_language": "ru",
  "confidence": 0.96,
  "summary": "–≠–ö–ì. –†–∏—Ç–º —Å–∏–Ω—É—Å–æ–≤—ã–π, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π. –ß–°–° 72 —É–¥/–º–∏–Ω."
}
```

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è:** —Ç–æ–ª—å–∫–æ 5 —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2. **–£—Å–ª–æ–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:** —Ä–∞–∑–Ω—ã–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
3. **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏:** AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π
4. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:** —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–∞–∫ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –§–ò–û
5. **Confidence score:** AI –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–≤–æ—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
6. **–¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è:** document_type ‚Üí document_subtype ‚Üí research_area (–¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö)

---

**–§–∞–π–ª:** `backend/app/services/ai_service.py:_build_extraction_prompt()`

