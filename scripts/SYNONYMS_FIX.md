# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è"

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–æ–≤ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω, –≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è", —Ö–æ—Ç—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –µ—Å—Ç—å.

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–∞–∑–≤–∞–Ω–∏—è –∞–Ω–∞–ª–∏–∑–æ–≤ –≤ MongoDB (—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ PostgreSQL.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π:

```bash
./scripts/check-analytes.sh
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –°–∫–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–π –Ω–∞–π–¥–µ–Ω–æ / –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- –¢–æ–ø-50 –Ω–∞–∑–≤–∞–Ω–∏–π –±–µ–∑ —Å–∏–Ω–æ–Ω–∏–º–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è–º

## –†–µ—à–µ–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω–æ–Ω–∏–º–æ–≤

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è:

```bash
./scripts/add-synonyms.sh
```

–°–∫—Ä–∏–ø—Ç:
1. –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –ë–î —á–µ—Ä–µ–∑ SSH
2. –ó–∞–≥—Ä—É–∑–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –∏–∑ MongoDB
3. –°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç –∏—Ö —Å –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
4. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Å–∏–Ω–æ–Ω–∏–º—ã
5. –î–æ–±–∞–≤–∏—Ç —Å–∏–Ω–æ–Ω–∏–º—ã –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

### –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–∏–Ω–æ–Ω–∏–º–æ–≤

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞:

```bash
ssh yc-user@158.160.99.232 'cd ~/medhistory && docker compose restart backend'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ backend:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ê–Ω–∞–ª–∏–∑—ã"
3. –í—ã–±–µ—Ä–∏—Ç–µ –∞–Ω–∞–ª–∏–∑ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ì–µ–º–æ–≥–ª–æ–±–∏–Ω")
4. –ì—Ä–∞—Ñ–∏–∫ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ

## –†—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω–æ–Ω–∏–º–æ–≤

–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –¥–æ–±–∞–≤—å—Ç–µ —Å–∏–Ω–æ–Ω–∏–º—ã –≤—Ä—É—á–Ω—É—é:

```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –ë–î
ssh yc-user@158.160.99.232 'docker exec -it medhistory-postgres-1 psql -U medhistory_user -d medhistory'

-- –ù–∞–π–¥–∏—Ç–µ canonical_name –∞–Ω–∞–ª–∏–∑–∞
SELECT canonical_name FROM analyte_standards WHERE canonical_name LIKE '%–ì–µ–º–æ–≥–ª–æ–±–∏–Ω%';

-- –î–æ–±–∞–≤—å—Ç–µ —Å–∏–Ω–æ–Ω–∏–º
INSERT INTO analyte_synonyms (id, analyte_id, synonym, synonym_lower, source, is_primary)
SELECT 
    gen_random_uuid(),
    id,
    '–ì–µ–º–æ–≥–ª–æ–±–∏–Ω',
    '–≥–µ–º–æ–≥–ª–æ–±–∏–Ω',
    'manual',
    false
FROM analyte_standards 
WHERE canonical_name = '–ì–µ–º–æ–≥–ª–æ–±–∏–Ω';
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

1. **MongoDB**: –•—Ä–∞–Ω–∏—Ç –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ AI –Ω–∞–∑–≤–∞–Ω–∏—è –∞–Ω–∞–ª–∏–∑–æ–≤ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2. **PostgreSQL —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫**: –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è + —Å–∏–Ω–æ–Ω–∏–º—ã
3. **Backend**: –ò—â–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ —Å–∏–Ω–æ–Ω–∏–º–∞–º –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∞–Ω–∞–ª–∏–∑ "–ì–µ–º–æ–≥–ª–æ–±–∏–Ω"
    ‚Üì
Backend –∏—â–µ—Ç —Å–∏–Ω–æ–Ω–∏–º—ã –≤ PostgreSQL
    ‚Üì
–ù–∞—Ö–æ–¥–∏—Ç: "–ì–µ–º–æ–≥–ª–æ–±–∏–Ω", "HGB", "Hemoglobin", ...
    ‚Üì
–ò—â–µ—Ç –≤ MongoDB –ø–æ —ç—Ç–∏–º —Å–∏–Ω–æ–Ω–∏–º–∞–º
    ‚Üì
–ù–∞—Ö–æ–¥–∏—Ç –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏ —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫
```

### –ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞

1. –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î —Å–æ–¥–µ—Ä–∂–∞–ª–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏ –¥–ª—è **–ª–æ–∫–∞–ª—å–Ω—ã—Ö** –¥–∞–Ω–Ω—ã—Ö
2. –ú—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
3. –ù–æ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω MongoDB **–¥—Ä—É–≥–∏–µ** –Ω–∞–∑–≤–∞–Ω–∏—è –∞–Ω–∞–ª–∏–∑–æ–≤
4. –°–∏–Ω–æ–Ω–∏–º—ã –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –Ω–µ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –ø—Ä–æ–¥–∞–∫—à–Ω –Ω–∞–∑–≤–∞–Ω–∏—è

## –°–∫—Ä–∏–ø—Ç—ã

- `check-analytes.sh` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã
- `add-synonyms.sh` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω–æ–Ω–∏–º–æ–≤
- `migrate-to-production.sh` - –ú–∏–≥—Ä–∞—Ü–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

## Troubleshooting

### –ì—Ä–∞—Ñ–∏–∫ –≤—Å—ë –µ—â—ë –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R / Cmd+Shift+R)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend:
   ```bash
   ssh yc-user@158.160.99.232 'docker logs medhistory-backend-1 --tail=100'
   ```

### –°–∏–Ω–æ–Ω–∏–º—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã, –Ω–æ –Ω–µ –≤—Å–µ –∞–Ω–∞–ª–∏–∑—ã —Ä–∞–±–æ—Ç–∞—é—Ç

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —Å–Ω–æ–≤–∞:
```bash
./scripts/check-analytes.sh
```

–ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –Ω–µ—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è - –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤—Ä—É—á–Ω—É—é.

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å–∏–Ω–æ–Ω–∏–º–æ–≤

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- SSH –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É
- –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –ë–î
- –ù–µ—Ç –ª–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (—Å–∏–Ω–æ–Ω–∏–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

## Best Practices

1. **–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `check-analytes.sh`
2. **–ü–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞**: –î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ë–î
3. **–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤**: –î–æ–±–∞–≤–ª—è–π—Ç–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–∏–Ω–æ–Ω–∏–º—ã —Å—Ä–∞–∑—É

---

**–°–æ–∑–¥–∞–Ω–æ:** 15 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0
