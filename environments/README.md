# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π MedHistory

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —à–∞–±–ª–æ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥.

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ä–µ–¥—ã

### üîß Local (–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
**–§–∞–π–ª:** `local.env`
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –≤–∞—à–µ–π –º–∞—à–∏–Ω–µ
**–ü–æ—Ä—Ç—ã:** 
- Frontend: 5173
- Backend: 8000
- PostgreSQL: 5432
- MongoDB: 27017
- MinIO: 9000/9001

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
cp environments/local.env .env.local
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env.local –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à OPENROUTER_API_KEY
```

### üß™ Staging (–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞)
**–§–∞–π–ª:** `staging.env`
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ production
**–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å:** –õ–æ–∫–∞–ª—å–Ω–æ –≤ Docker –∏–ª–∏ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
**–ü–æ—Ä—Ç—ã:** 
- Frontend: 8080
- Backend: 8001
- PostgreSQL: 5433
- MongoDB: 27018
- MinIO: 9010/9011

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
cp environments/staging.env .env.staging
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env.staging –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –∏ –∫–ª—é—á–∏
# –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏, –æ—Ç–ª–∏—á–Ω—ã–µ –æ—Ç local!
```

### üöÄ Production (–ë–æ–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä)
**–§–∞–π–ª:** `production.env`
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–æ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä
**–ü–æ—Ä—Ç—ã:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ (–¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Nginx 80/443)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
cp environments/production.env .env.production
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env.production
# –ö–†–ò–¢–ò–ß–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—á–µ–Ω—å –Ω–∞–¥–µ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)!
# –û–±–Ω–æ–≤–∏—Ç–µ PROD_SERVER_IP –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è IP —Å–µ—Ä–≤–µ—Ä–∞
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```bash
cp environments/local.env .env.local
```

2. **–î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á OpenRouter:**
   - –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á –Ω–∞ https://openrouter.ai/keys
   - –û—Ç–∫—Ä–æ–π—Ç–µ `.env.local` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ `your_openrouter_api_key_here`

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é —Å—Ä–µ–¥—É:**
```bash
./deploy local
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ Production

1. **–°–æ–∑–¥–∞–π—Ç–µ staging –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```bash
cp environments/staging.env .env.staging
```

2. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** –≤ `.env.staging`

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É:**
```bash
./deploy staging
```

4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏** –Ω–∞ http://localhost:8080

### –î–µ–ø–ª–æ–π –Ω–∞ Production

1. **–°–æ–∑–¥–∞–π—Ç–µ production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–æ–¥–∏–Ω —Ä–∞–∑):**
```bash
cp environments/production.env .env.production
```

2. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –û–ß–ï–ù–¨ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞ —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤)

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP —Å–µ—Ä–≤–µ—Ä–∞** –≤ `PROD_SERVER_IP`

4. **–î–µ–ø–ª–æ–π –Ω–∞ production:**
```bash
./deploy production
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:**

- ‚úÖ –§–∞–π–ª—ã –≤ `environments/` - —ç—Ç–æ —à–∞–±–ª–æ–Ω—ã (–º–æ–∂–Ω–æ –∫–æ–º–∏—Ç–∏—Ç—å –≤ Git)
- ‚ùå –§–∞–π–ª—ã `.env.*` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –Ω–∞—Å—Ç–æ—è—â–∏–µ –ø–∞—Ä–æ–ª–∏ (–ù–ï –∫–æ–º–∏—Ç–∏—Ç—å!)
- ‚ùå –í—Å–µ `.env.*` —Ñ–∞–π–ª—ã —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.gitignore`
- üîí –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- üîë –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥!

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π

### macOS/Linux:
```bash
# PostgreSQL password
openssl rand -base64 32

# MongoDB password  
openssl rand -base64 32

# MinIO password
openssl rand -base64 32

# JWT Secret (64 —Å–∏–º–≤–æ–ª–∞)
openssl rand -base64 48
```

### –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞—Ä–æ–ª–µ–π
- 1Password
- LastPass
- Bitwarden

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
./scripts/utils/validate-config.sh staging
./scripts/utils/validate-config.sh production
```

–≠—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ –î–ª–∏–Ω—É JWT —Å–µ–∫—Ä–µ—Ç–∞ (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- ‚úÖ –§–æ—Ä–º–∞—Ç URL –∏ –∫–ª—é—á–µ–π

